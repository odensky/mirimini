<!DOCTYPE html>
<html>
<head>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script>
</head>
<body>
<script>


const config = {
    type: Phaser.AUTO,
    width: 800,
    height: 600,
    scene: {
        preload: preload,
        create: create,
        update: update,
    },
    physics: {
        default: 'arcade',
        arcade: {
            // debug: true,
            // gravity: { y: 400 }
        }
    }
};
const game = new Phaser.Game(config);


// SEãƒãƒ¼ã‚«ãƒ¼
const markers = [
    { name: '0', start: 0, duration: 0.4, config: {} },
    { name: '1', start: 1, duration: 0.4, config: {} },
    { name: '2', start: 2, duration: 0.4, config: {} },
    { name: '3', start: 3, duration: 0.4, config: {} },
    { name: '4', start: 4, duration: 0.4, config: {} },
    { name: '5', start: 5, duration: 0.4, config: {} },
    { name: '6', start: 6, duration: 0.4, config: {} },
    { name: '7', start: 7, duration: 0.4, config: {} },
    { name: '8', start: 8, duration: 0.4, config: {} },
    { name: '9', start: 9, duration: 0.4, config: {} },
    { name: '10', start: 10, duration: 0.4, config: {} },
    { name: '11', start: 11, duration: 0.4, config: {} },
    { name: '12', start: 12, duration: 0.4, config: {} },
    { name: '13', start: 13, duration: 0.4, config: {} },
    { name: '14', start: 14, duration: 0.4, config: {} },
    { name: '15', start: 15, duration: 0.4, config: {} },
    { name: '16', start: 16, duration: 0.4, config: {} },
    { name: '17', start: 17, duration: 0.4, config: {} },
    { name: '18', start: 18, duration: 0.4, config: {} },
    { name: '19', start: 19, duration: 0.4, config: {} },
    { name: '20', start: 20, duration: 0.4, config: {} },
    { name: '21', start: 21, duration: 0.4, config: {} },
    { name: '22', start: 22, duration: 0.4, config: {} },
    { name: '23', start: 23, duration: 0.4, config: {} },
    { name: '24', start: 24, duration: 0.4, config: {} },
    { name: '25', start: 25, duration: 0.4, config: {} },
    { name: '26', start: 26, duration: 0.4, config: {} },
    { name: '27', start: 27, duration: 0.4, config: {} },
    { name: '28', start: 28, duration: 0.4, config: {} },
    { name: '29', start: 29, duration: 0.4, config: {} },
    { name: '30', start: 30, duration: 0.4, config: {} },
    { name: '31', start: 31, duration: 0.4, config: {} },
    { name: '32', start: 32, duration: 0.4, config: {} },
    { name: '33', start: 33, duration: 0.4, config: {} },
    { name: '34', start: 34, duration: 0.4, config: {} },
    { name: '35', start: 35, duration: 0.4, config: {} },
    { name: '36', start: 36, duration: 0.4, config: {} },
    { name: '37', start: 37, duration: 0.4, config: {} },
    { name: '38', start: 38, duration: 0.4, config: {} },
]

const idols = [
    { name: "å¤©æµ· æ˜¥é¦™", type: "P", color: "#e22b30", age: 17, birthday: "04/03", stature: 158, hometown: "ç¥å¥ˆå·", hobby: "ã‚«ãƒ©ã‚ªã‚±ã€é•·é›»è©±", skill: "ãŠè“å­ä½œã‚Š", favorite: "æ­Œã†ã“ã¨" },
    { name: "å¦‚æœˆ åƒæ—©", type: "F", color: "#2743d2", age: 16, birthday: "02/25", stature: 162, hometown: "æ±äº¬", hobby: "éŸ³æ¥½é‘‘è³", skill: "æ­Œ", favorite: "ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°" },
    { name: "æ˜Ÿäº• ç¾å¸Œ", type: "A", color: "#b4e04b", age: 15, birthday: "11/23", stature: 161, hometown: "ç¥å¥ˆå·", hobby: "å‹é”ã¨ãŠã—ã‚ƒã¹ã‚Šã€ãƒã‚¤ãƒ«ã‚¢ãƒ¼ãƒˆ", skill: "å¯ã‚‹ã“ã¨", favorite: "ãŠã«ãã‚Šã€ã„ã¡ã”ãƒãƒãƒ­ã‚¢" },
    { name: "è©åŸ é›ªæ­©", type: "P", color: "#d3dde9", age: 17, birthday: "12/24", stature: 155, hometown: "æ±äº¬", hobby: "MYè©©é›†ã‚’æ›¸ãã“ã¨", skill: "æ—¥æœ¬èŒ¶ã‚’ã„ã‚Œã‚‹ã“ã¨", favorite: "ãƒ–ãƒ­ã‚°" },
    { name: "é«˜æ§» ã‚„ã‚ˆã„", type: "A", color: "#f39939", age: 14, birthday: "03/25", stature: 145, hometown: "åŸ¼ç‰", hobby: "ã‚ªã‚»ãƒ­ã€é‡çƒ", skill: "ç¯€ç´„ã€å®¶åº­èœåœ’", favorite: "å®¶æ—" },
    { name: "èŠåœ° çœŸ", type: "P", color: "#515558", age: 17, birthday: "08/29", stature: 159, hometown: "é™å²¡", hobby: "ã‚¹ãƒãƒ¼ãƒ„å…¨èˆ¬", skill: "ç©ºæ‰‹ã€ãƒ€ãƒ³ã‚¹", favorite: "ã¬ã„ãã‚‹ã¿" },
    { name: "æ°´ç€¬ ä¼Šç¹”", type: "F", color: "#fd99e1", age: 15, birthday: "05/05", stature: 153, hometown: "æ±äº¬", hobby: "æµ·å¤–æ—…è¡Œã€é£Ÿã¹æ­©ã", skill: "ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°", favorite: "æœæ±100ï¼…ã‚ªãƒ¬ãƒ³ã‚¸ã‚¸ãƒ¥ãƒ¼ã‚¹" },
    { name: "å››æ¡ è²´éŸ³", type: "F", color: "#a6126a", age: 18, birthday: "01/21", stature: 169, hometown: "äº¬éƒ½ï¼Ÿ", hobby: "å¤©ä½“è¦³æ¸¬ã€æ­´å²", skill: "ç›´æ„Ÿ", favorite: "ãƒ©ãƒ¼ãƒ¡ãƒ³" },
    { name: "ç§‹æœˆ å¾‹å­", type: "F", color: "#01a860", age: 19, birthday: "06/23", stature: 156, hometown: "æ±äº¬", hobby: "è³‡æ ¼å–å¾—", skill: "åˆ†æãƒ»å®Ÿè·µ", favorite: "ã‚²ãƒ¼ãƒ ã€å°èª¬" },
    { name: "ä¸‰æµ¦ ã‚ãšã•", type: "A", color: "#9238be", age: 21, birthday: "07/19", stature: 168, hometown: "åƒè‘‰", hobby: "çŠ¬ã®æ•£æ­©", skill: "å ã„", favorite: "ã‚«ãƒ•ã‚§å·¡ã‚Š" },
    { name: "åŒæµ· äºœç¾", type: "A", color: "#ffe43f", age: 13, birthday: "05/22", stature: 158, hometown: "æ±äº¬", hobby: "ãƒ¡ãƒ¼ãƒ«ã€ã‚¨ã‚³", skill: "ãƒ¢ãƒãƒãƒ", favorite: "éŠã¶ã“ã¨" },
    { name: "åŒæµ· çœŸç¾", type: "A", color: "#ffe43f", age: 13, birthday: "05/22", stature: 158, hometown: "æ±äº¬", hobby: "ãƒ¡ãƒ¼ãƒ«ã€ã‚²ãƒ¼ãƒ ", skill: "ãƒ¢ãƒãƒãƒ", favorite: "éŠã¶ã“ã¨" },
    { name: "æˆ‘é‚£è¦‡ éŸ¿", type: "P", color: "#01adb9", age: 16, birthday: "10/10", stature: 152, hometown: "æ²–ç¸„", hobby: "ç·¨ã¿ç‰©ã€å“çƒ", skill: "å®¶äº‹å…¨èˆ¬", favorite: "æ•£æ­©ã€å‹•ç‰©" },
    { name: "æ˜¥æ—¥ æœªæ¥", type: "P", color: "#ea5b76", age: 14, birthday: "06/28", stature: 156, hometown: "æ±äº¬", hobby: "å¯æ„›ã„é«ªç•™ã‚ã‚’\nã€€ã€€ã€€ã€€ é›†ã‚ã‚‹ã“ã¨", skill: "æ­Œã†ã“ã¨", favorite: "ãƒ©ã‚¤ãƒ–" },
    { name: "æœ€ä¸Š é™é¦™", type: "F", color: "#6495cf", age: 14, birthday: "09/14", stature: 162, hometown: "åŸ¼ç‰", hobby: "ãƒ†ãƒ‹ã‚¹", skill: "ãƒ”ã‚¢ãƒ", favorite: "ã†ã©ã‚“" },
    { name: "ä¼Šå¹ ç¿¼", type: "A", color: "#fed552", age: 14, birthday: "07/30", stature: 158, hometown: "æ±äº¬", hobby: "éŠã³ã®è¨ˆç”»ã‚’\nã€€ã€€ã€€ã€€ãŸã¦ã‚‹ã“ã¨", skill: "ã˜ã‚ƒã‚“ã‘ã‚“", favorite: "ãƒ“ãƒ¼ãƒ•ã‚¹ãƒ†ãƒ¼ã‚­" },
    { name: "ç”°ä¸­ ç´è‘‰", type: "P", color: "#92cfbb", age: 18, birthday: "10/05", stature: 157, hometown: "æ±äº¬", hobby: "ãŠé¢¨å‘‚", skill: "ãƒ•ã‚§ãƒ³ã‚·ãƒ³ã‚°", favorite: "ã‚¢ã‚¤ã‚¹" },
    { name: "å³¶åŸ ã‚¨ãƒ¬ãƒŠ", type: "A", color: "#9bce92", age: 17, birthday: "10/26", stature: 160, hometown: "ãƒ–ãƒ©ã‚¸ãƒ«", hobby: "ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼", skill: "ã‚µãƒ³ãƒã‚’è¸Šã‚‹ã“ã¨", favorite: "ã¿ã‚“ãªã§é¨’ãã“ã¨" },
    { name: "ä½ç«¹ ç¾å¥ˆå­", type: "P", color: "#58a6dc", age: 18, birthday: "03/22", stature: 158, hometown: "æ±äº¬", hobby: "æ ¼é—˜ã‚²ãƒ¼ãƒ ", skill: "æ–™ç†", favorite: "å‹é”ã¨ã®é•·é›»è©±" },
    { name: "æ‰€ æµç¾", type: "F", color: "#454341", age: 16, birthday: "04/15", stature: 159, hometown: "åŸ¼ç‰", hobby: "ã‚«ãƒ©ã‚ªã‚±", skill: "äººã®èª•ç”Ÿã‚’è¦šãˆã‚‹ã“ã¨", favorite: "å‹é”" },
    { name: "å¾³å· ã¾ã¤ã‚Š", type: "P", color: "#5abfb7", age: 19, birthday: "02/04", stature: 163, hometown: "æ„›çŸ¥", hobby: "æ¼«ç”»ã‚ã¤ã‚", skill: "æ¼”æŠ€", favorite: "ç„¼ããƒã‚·ãƒ¥ãƒãƒ­ã€ã‚¦ãƒŸã‚¦ã‚·" },
    { name: "ç®±å´ æ˜Ÿæ¢¨èŠ±", type: "A", color: "#ed90ba", age: 13, birthday: "02/20", stature: 146, hometown: "æ±äº¬", hobby: "ãƒã‚¤ã‚ªãƒªãƒ³", skill: "ã‚¢ã‚¸ãƒªãƒ†ã‚£ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼", favorite: "ç´…èŒ¶ã€ã‚¯ãƒƒã‚­ãƒ¼" },
    { name: "é‡ã€…åŸ èŒœ", type: "A", color: "#eb613f", age: 16, birthday: "12/03", stature: 150, hometown: "åŸ¼ç‰", hobby: "ã‚¹ã‚­ãƒƒãƒ—", skill: "ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚±ãƒ¼ãƒˆ", favorite: "ãƒ—ãƒªãƒ³" },
    { name: "æœ›æœˆ æå¥ˆ", type: "A", color: "#7e6ca8", age: 14, birthday: "05/31", stature: 152, hometown: "ç¥å¥ˆå·", hobby: "ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ", skill: "ã‚¿ã‚¤ãƒ”ãƒ³ã‚°", favorite: "ã‹ã‚ã„ã„ã‚‚ã®" },
    { name: "ãƒ­ã‚³", type: "F", color: "#fff03c", age: 15, birthday: "03/01", stature: 154, hometown: "æ±äº¬", hobby: "ç‰©ã‚’ä½œã‚‹ã“ã¨", skill: "ç›®ã‚’é–‰ã˜ãŸã¾ã¾æ­©ã‘ã‚‹", favorite: "ãƒãƒˆ" },
    { name: "ä¸ƒå°¾ ç™¾åˆå­", type: "P", color: "#c7b83c", age: 15, birthday: "03/18", stature: 154, hometown: "æ±äº¬", hobby: "èª­æ›¸", skill: "ãƒšãƒ³å›ã—", favorite: "ãŠã¯ã" },
    { name: "é«˜å±± ç´—ä»£å­", type: "P", color: "#7f6575", age: 17, birthday: "12/29", stature: 156, hometown: "èŒ¨æœ¨", hobby: "ãƒãƒªãƒã‚ºãƒŸã®é£¼è‚²", skill: "ä¸€æ™©å¯ã‚‹ã¨å…ƒæ°—ã«ãªã‚Œã‚‹", favorite: "å‹é”ã€ã‚¢ã‚¤ãƒ‰ãƒ«ä»²é–“" },
    { name: "æ¾ç”° äºœåˆ©æ²™", type: "P", color: "#b54461", age: 16, birthday: "06/07", stature: 154, hometown: "æ±äº¬", hobby: "ã‚¢ã‚¤ãƒ‰ãƒ«ã®ãƒ‡ãƒ¼ã‚¿é›†ã‚", skill: "ã‚¢ã‚¤ãƒ‰ãƒ«ã®å¤‰è£…ã‚’è¦‹ç ´ã‚Œã‚‹", favorite: "ãƒ•ã‚¡ãƒŸãƒ¬ã‚¹ã®ãƒ‡ã‚¶ãƒ¼ãƒˆ" },
    { name: "é«˜å‚ æµ·ç¾", type: "P", color: "#e9739b", age: 16, birthday: "08/10", stature: 155, hometown: "åƒè‘‰", hobby: "ãƒœãƒ«ãƒ€ãƒªãƒ³ã‚°", skill: "å¸¸äººã«ã§ããªã„ãƒãƒ¼ã‚¸ãƒ³ã‚°ãŒã§ãã‚‹", favorite: "ãƒ€ãƒ³ã‚¹" },
    { name: "ä¸­è°· è‚²", type: "P", color: "#f7e78e", age: 10, birthday: "12/16", stature: 142, hometown: "æ±äº¬", hobby: "ã‚¢ãƒ‹ãƒ¡é‘‘è³", skill: "æ—©èµ·ã", favorite: "ãŠã‹ã‚ã•ã‚“" },
    { name: "å¤©ç©ºæ©‹ æœ‹èŠ±", type: "F", color: "#bee3e3", age: 15, birthday: "11/11", stature: 156, hometown: "æ±äº¬", hobby: "ãƒ•ã‚¡ãƒ³ã«å–œã‚“ã§\nã€€ã€€ã€€ã€€ã‚‚ã‚‰ã†ã“ã¨", skill: "å£ã’ã‚“ã‹", favorite: "ã‹ã‚ã„ã„æ‰‡å­" },
    { name: "ã‚¨ãƒŸãƒªãƒ¼", type: "P", color: "#554171", age: 13, birthday: "01/08", stature: 156, hometown: "ã‚¤ã‚®ãƒªã‚¹", hobby: "ã‹ã‚‹ãŸéŠã³", skill: "æ—¥æœ¬èˆè¸Š", favorite: "æŠ¹èŒ¶" },
    { name: "åŒ—æ²¢ å¿—ä¿", type: "F", color: "#afa690", age: 14, birthday: "01/18", stature: 161, hometown: "æ±äº¬", hobby: "ãŠæ°—ã«å…¥ã‚Šã®\nã€€ã€€ã€€ã€€çµµæœ¬ã‚’æ¢ã™ã“ã¨", skill: "è¨˜æ†¶åŠ›ã€é›†ä¸­åŠ›ãŒé«˜ã„", favorite: "ã¬ã„ãã‚‹ã¿" },
    { name: "èˆæµœ æ­©", type: "F", color: "#e25a9b", age: 19, birthday: "07/23", stature: 158, hometown: "æ„›åª›", hobby: "ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°", skill: "ãƒ€ãƒ³ã‚¹", favorite: "ã‚ã•ã³" },
    { name: "æœ¨ä¸‹ ã²ãªãŸ", type: "A", color: "#d1342c", age: 14, birthday: "07/04", stature: 146, hometown: "åŒ—æµ·é“", hobby: "ã‚¬ãƒ¼ãƒ‡ãƒ‹ãƒ³ã‚°", skill: "å¤©æ°—ã‚’å½“ã¦ã‚‹ã“ã¨", favorite: "ãŠã°ã‚ã¡ã‚ƒã‚“" },
    { name: "çŸ¢å¹ å¯å¥ˆ", type: "P", color: "#f5ad3b", age: 14, birthday: "08/18", stature: 155, hometown: "ç¥å¥ˆå·", hobby: "ãªã‚“ã§ã‚‚æ­Œã«ã™ã‚‹ã“ã¨", skill: "åˆå”±", favorite: "å±‹ä¸Šã§æ­Œã†ã“ã¨" },
    { name: "æ¨ªå±± å¥ˆç·’", type: "P", color: "#788bc5", age: 17, birthday: "02/12", stature: 159, hometown: "å¤§é˜ª", hobby: "éŠ­æ¹¯ï¼†æ¸©æ³‰å·¡ã‚Š", skill: "ã‚¹ã‚¿ãƒŸãƒŠãŒã‚ã‚‹", favorite: "å‹é”ã¨ãŠã—ã‚ƒã¹ã‚Š" },
    { name: "äºŒéšå ‚ åƒé¶´", type: "F", color: "#f19557", age: 21, birthday: "10/21", stature: 165, hometown: "æ±äº¬", hobby: "ã‚«ãƒ•ã‚§ã§\nã€€ã€€ã€€ã€€ã‚¢ãƒ‘ãƒ¬ãƒ«èªŒãƒã‚§ãƒƒã‚¯", skill: "äººã®åå‰ã¨é¡”ã‚’å¿˜ã‚Œãªã„", favorite: "æ†§ã‚Œã®ç›®ã§è¦‹ã‚‰ã‚Œã‚‹ã“ã¨" },
    { name: "é¦¬å ´ ã“ã®ã¿", type: "A", color: "#f1becb", age: 24, birthday: "06/12", stature: 143, hometown: "å±±å£", hobby: "åŒ—ç±³ãƒ‰ãƒ©ãƒé‘‘è³", skill: "éº»é›€", favorite: "æ—¥æœ¬é…’" },
    { name: "å¤§ç¥ ç’°", type: "A", color: "#ee762e", age: 12, birthday: "04/29", stature: 147, hometown: "é¦™å·", hobby: "æ¢æ¤œ", skill: "çŸ³æŠ•ã’", favorite: "ã‚¢ã‚¹ãƒ¬ãƒãƒƒã‚¯ãƒ©ãƒ³ãƒ‰" },
    { name: "è±Šå· é¢¨èŠ±", type: "A", color: "#7278a8", age: 22, birthday: "09/02", stature: 162, hometown: "åƒè‘‰", hobby: "çŒ®è¡€", skill: "æ¯ã‚’æ­¢ã‚ã‚‹ã“ã¨", favorite: "çŒ«" },
    { name: "å®®å°¾ ç¾ä¹Ÿ", type: "A", color: "#d7a96b", age: 17, birthday: "04/24", stature: 156, hometown: "æ±äº¬", hobby: "å›²ç¢ã€å°†æ£‹", skill: "è¦–åŠ›ãŒé«˜ã„", favorite: "ã‚µãƒ³ãƒ‰ã‚¤ãƒƒãƒ" },
    { name: "ç¦ç”° ã®ã‚Šå­", type: "P", color: "#eceb70", age: 18, birthday: "03/30", stature: 164, hometown: "æ±äº¬", hobby: "æ ¼é—˜æŠ€è¦³æˆ¦", skill: "ãƒã‚¤ã‚¯ã®é‹è»¢", favorite: "ç„¼è‚‰" },
    { name: "çœŸå£ ç‘å¸Œ", type: "F", color: "#99b7dc", age: 17, birthday: "01/27", stature: 160, hometown: "ç¥å¥ˆå·", hobby: "æ‰‹å“", skill: "ãƒãƒˆãƒ³ãƒˆãƒ¯ãƒªãƒ³ã‚°", favorite: "ã‚¯ãƒ­ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒ‘ã‚ºãƒ«" },
    { name: "ç¯ å®® å¯æ†", type: "A", color: "#b63b40", age: 16, birthday: "08/27", stature: 159, hometown: "æ±äº¬", hobby: "ã‚¢ãƒ­ãƒãƒ†ãƒ©ãƒ”ãƒ¼", skill: "ãƒãƒ¼ã‚«ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹", favorite: "ãŠé¢¨å‘‚" },
    { name: "ç™¾ç€¬ è‰ç·’", type: "F", color: "#f19591", age: 23, birthday: "11/21", stature: 168, hometown: "åºƒå³¶", hobby: "ãƒ¨ã‚¬ã‚¨ã‚¯ã‚µã‚µã‚¤ã‚º", skill: "ãƒ¡ã‚¤ã‚¯", favorite: "å¯æ„›ãã¦ã‚»ã‚¯ã‚·ãƒ¼ãªæœ" },
    { name: "æ°¸å‰ æ˜´", type: "F", color: "#aeb49c", age: 15, birthday: "09/20", stature: 154, hometown: "æ±äº¬", hobby: "é‡çƒ", skill: "å¤‰åŒ–çƒ", favorite: "ã‚¢ã‚¤ãƒ‰ãƒ«" },
    { name: "åŒ—ä¸Š éº—èŠ±", type: "A", color: "#6bb6b0", age: 20, birthday: "05/17", stature: 164, hometown: "é•·é‡", hobby: "ç™»å±±", skill: "è‚ºæ´»é‡ãŒå¤§ãã„", favorite: "ãƒ‰ãƒ©ã‚¤ãƒ–" },
    { name: "å‘¨é˜² æ¡ƒå­", type: "F", color: "#efb864", age: 11, birthday: "11/06", stature: 140, hometown: "æ±äº¬", hobby: "ã‹ã‚ã„ã„ã‚·ãƒ¼ãƒ«é›†ã‚", skill: "æ¼”æŠ€ã‚„å°è©ã®æš—è¨˜", favorite: "ãƒ›ãƒƒãƒˆã‚±ãƒ¼ã‚­" },
    { name: "ã‚¸ãƒ¥ãƒªã‚¢", type: "F", color: "#d7385f", age: 16, birthday: "09/26", stature: 157, hometown: "ç¦å²¡", hobby: "ãªã—", skill: "ã‚®ã‚¿ãƒ¼", favorite: "ãƒ‘ãƒ³ã‚¯ãƒ­ãƒƒã‚¯" },
    { name: "ç™½çŸ³ ç´¬", type: "F", color: "#b6b3e2", age: 17, birthday: "05/29", stature: 160, hometown: "çŸ³å·ï¼ˆé‡‘æ²¢ï¼‰", hobby: "åº­åœ’ãƒ»ç”˜å‘³å‡¦ã®æ•£ç­–", skill: "ç€ç‰©ã®ç€ä»˜ã‘ã€ä¸‰å‘³ç·š", favorite: "å’Œã‚¹ã‚¤ãƒ¼ãƒ„" },
    { name: "æ¡œå®ˆ æ­Œç¹”", type: "A", color: "#152169", age: 23, birthday: "03/27", stature: 165, hometown: "æ±äº¬", hobby: "åˆå”±ãƒ»ã‚´ãƒ«ãƒ•", skill: "ä¹—é¦¬", favorite: "å­ä¾›ã€æ´‹è“å­" },
];

/** @type {{name: string, song: string, idols: number[]}[]} */
const units = [
    { name: "MILLONSTARS", songs: ["Rat A Tat!!!", "ã‚»ãƒ–ãƒ³ã‚«ã‚¦ãƒ³ãƒˆ"], idols: [13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51]},
    { name: "Sunshine Rhythm", songs: ["ã‚µãƒ³ãƒªã‚ºãƒ ãƒ»ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ©â™ª"], idols: [31, 34, 36, 17, 24, 29, 15, 18, 42, 23, 35, 45, 51]},
    { name: "BlueMoon Harmony", songs: ["brave HARMONY"], idols: [19, 33, 43, 30, 37, 44, 14, 25, 46, 26, 47, 49, 50]},
    { name: "Starlight Melody", songs: ["Starry Melody"], idols: [16, 27, 28, 32, 21, 22, 39, 13, 20, 41, 38, 40, 48]},
    { name: "ã‚­ãƒ£ãƒ³ã‚µãƒ¼", songs: ["ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ãƒ»ãƒã‚¤ãƒƒ"], idols: [31, 34, 36]},
    { name: "ãƒ¬ã‚ª", songs: ["ã‚²ã‚­ãƒ†ã‚­ï¼ãƒ ãƒ†ã‚­ï¼æ‹ã—ãŸã„ï¼"], idols: [17, 24, 29]},
    { name: "ãƒªãƒ–ãƒ©", songs: ["Bonnes! Bonnes!! Vacances!!!"], idols: [15, 18, 42]},
    { name: "ã‚«ãƒ—ãƒªã‚³ãƒ¼ãƒ³", songs: ["NO CURRY NO LIFE"], idols: [23, 35, 45]},
    { name: "ã‚µã‚¸ã‚¿ãƒªã‚¢ã‚¹", songs: ["Raise the FLAG"], idols: [19, 33, 43]},
    { name: "ãƒ”ã‚¹ã‚±ã‚¹", songs: ["P.S I Love You"], idols: [30, 37, 44]},
    { name: "ã‚¦ã‚£ãƒ«ã‚´", songs: ["ãƒ—ãƒªãƒ ãƒ©"], idols: [14, 25, 46]},
    { name: "ã‚¢ã‚¯ã‚¢ãƒªã‚¦ã‚¹", songs: ["å¾…ã¡ã¼ã†ã‘ã®Lacrima"], idols: [26, 47, 49]},
    { name: "ã‚¹ã‚³ãƒ¼ãƒ”ã‚ª", songs: ["ãƒªãƒ•ãƒ¬ã‚¤ãƒ³ã‚­ã‚¹"], idols: [16, 27, 28, 32]},
    { name: "ã‚¢ãƒªã‚¨ã‚¹", songs: ["Sweet Sweet Soul"], idols: [21, 22, 39]},
    { name: "ã‚¿ã‚¦ãƒ©ã‚¹", songs: ["ãƒ¡ãƒ¡ãƒ³ãƒˆï¼Ÿãƒ¢ãƒ¡ãƒ³ãƒˆâ™ªãƒ«ãƒ«ãƒ«ãƒ«ãƒ«â˜†"], idols:[13, 20, 41]},
    { name: "ã‚¸ã‚§ãƒŸãƒ‹", songs: ["æ°¸é ã®èŠ±"], idols: [38, 40, 48]},
    { name: "ã‚ªãƒ•ã‚£ã‚¦ã‚¯ã‚¹", songs: ["é›»æ³¢æ„Ÿå‚·"], idols: [50, 51]},
    { name: "ãƒ•ã‚§ã‚¢ãƒªãƒ¼ã‚¹ã‚¿ãƒ¼ã‚º", songs: ["FairyTaleã˜ã‚ƒã„ã‚‰ã‚Œãªã„"], idols: [19, 30, 37, 45, 32, 43, 50, 14, 49, 24, 33, 46, 48]},
    { name: "ã‚¨ãƒ³ã‚¸ã‚§ãƒ«ã‚¹ã‚¿ãƒ¼ã‚º", songs: ["Angelic Paradeâ™ª"], idols: [17, 41, 38, 40, 47, 51, 15, 22, 44, 21, 23, 34, 39 ]},
    { name: "ãƒ—ãƒªãƒ³ã‚»ã‚¹ã‚¹ã‚¿ãƒ¼ã‚º", songs: ["Princess Be Ambitious!!"], idols: [25, 27, 29, 18, 26, 28, 36, 42, 20, 31, 13, 16, 35]},
    { name: "å¤œæƒ³ä»¤å¬¢", songs: ["æ˜ãæ˜Ÿã€é ã„æœˆ", "Everlasting"], idols: [19, 30, 37, 45] },
    { name: "Cleasky", songs: ["è™¹è‰²letters", "æƒ³ã„å‡ºã¯ã‚¯ãƒªã‚¢ã‚¹ã‚«ã‚¤"], idols: [17, 41] },
    { name: "ãƒˆã‚¥ã‚¤ãƒ³ã‚¯ãƒ«ãƒªã‚ºãƒ ", songs: ["ZETTAI Ã— BREAK!! ãƒˆã‚¥ã‚¤ãƒ³ã‚¯ãƒ«ãƒªã‚ºãƒ ", "Tomorrow Program"], idols: [25, 27, 29]},
    { name: "EScape", songs: ["Melty Fantasia", "I.D ã€œEScape from Utopiaã€œ"], idols: [32, 43, 50]},
    { name: "4 Luxury", songs: ["èŠ±ç››ã‚ŠWeekendâœ¿", "RED ZONE"], idols: [38, 40, 47, 51]},
    { name: "é–ƒå…‰â˜†HANABIå›£", songs: ["å’²ãã¯æµ®ä¸–ã®å›èŠ±ç«", "BORN ON DREAM! ã€œHANABIâ˜†NIGHTã€œ"], idols: [18, 26, 28, 36, 42]},
    { name: "D/Zeal", songs: ["ãƒãƒ¼ãƒ¢ãƒ‹ã‚¯ã‚¹", "é¤ã®é³¥"], idols: [14, 49]},
    { name: "ã‚Šã‚‹ãã‚ƒã‚“ ã€œ3 little candyã€œ", songs: ["ãƒãƒ«ãƒãƒå¥³å­", "å½¼æ°ã«ãªã£ã¦ã‚ˆã€‚"], idols: [15, 22, 44]},
    { name: "Charlotteãƒ»Charlotte", songs: ["ã ã£ã¦ã‚ãªãŸã¯ãƒ—ãƒªãƒ³ã‚»ã‚¹", "ãƒŸãƒ©ãƒ¼ã‚¸ãƒ¥ãƒ»ãƒŸãƒ©ãƒ¼"], idols: [20, 31]},
    { name: "Jelly PoP Beans", songs: ["æœˆæ›œæ—¥ã®ã‚¯ãƒªãƒ¼ãƒ ã‚½ãƒ¼ãƒ€", "I did+I will"], idols: [24, 33, 46, 48]},
    { name: "ãƒ”ã‚³ãƒ”ã‚³ãƒ—ãƒ©ãƒãƒƒãƒ„", songs: ["ãƒ”ã‚³ãƒ”ã‚³IIKO! ã‚¤ãƒ³ãƒ™ãƒ¼ãƒ€ãƒ¼", "Get lol! Get lol! SONG"], idols: [21, 23, 34, 39]},
    { name: "STAR ELEMENTS", songs: ["Episode. Tiara", "ã‚®ãƒ–ãƒŸãƒ¼ãƒ¡ã‚¿ãƒ•ã‚¡ãƒ¼"], idols:[13, 16, 35]},
    { name: "Chrono-Lexica", songs: ["dans l'obscuritÃ©", "å›šã‚ã‚Œã®TeaTime"], idols:[23, 24, 25, 43, 46]},
    { name: "Sherry 'n Cherry", songs: ["Cherry Colored Love", "å¤œã¨ã€æ˜ã‹ã‚Šã¨ã€‚"], idols:[38, 45]},
    { name: "èŠ±å’²å¤œ", songs: ["ç™¾èŠ±ã¯æœˆä¸‹ã«æ•£ã‚Šã¬ã‚‹ã‚’", "çŸ›ç›¾ã®æœˆ"], idols:[30, 31, 50]},
    { name: "Jus-2Mint", songs: ["Super Duper", "Hang In There!"], idols:[18, 36]},
    { name: "miraclesonicâ˜…expassion", songs: ["çµ¶å¯¾çš„Performer", "My Evolution"], idols: [17, 28, 33, 42]},
    { name: "Fleuranges", songs: ["Special Wonderful Smile", "æ—…ç«‹ã¡ã®ã‚³ãƒ³ãƒ‘ã‚¹"], idols: [21, 34, 41, 44]},
    { name: "ã‚ªãƒšãƒ©ã‚»ãƒªã‚¢ãƒ»ç…Œè¼åº§", songs: ["Parade d'amour", "æ˜Ÿå®™ã®Voyage"], idols: [16, 20, 32, 51]},
    { name: "TIntMe!", songs: ["Arrive You ï½ãã‚ŒãŒé‹å‘½ã§ã‚‚ï½", "ãƒ©ã‚¤ãƒ©ãƒƒã‚¯ã«ã¤ã¤ã¾ã‚Œã¦"], idols: [29, 39, 48]},
    { name: "TRICK&TREAT", songs: ["Blackâ˜…Party", "ãƒ•ã‚·ã‚®ãƒˆãƒ©ãƒ™ãƒ©ãƒ¼"], idols: [22, 47]},
    { name: "chicAAmor", songs: ["æ·±ç´…ã®ãƒ‘ã‚·ã‚ªãƒ³", "Paradox of LOVE"], idols: [26, 37, 40, 49]},
    { name: "â‰¡å›å½©â‰¡", songs: ["ReTTale", "ãƒ‘ãƒ³ã¨ãƒ•ã‚£ãƒ«ãƒ "], idols: [19, 27, 35]},
    { name: "ã‚¹ãƒˆãƒ­ãƒ™ãƒªãƒ¼ãƒãƒƒãƒ—ãƒ ãƒ¼ãƒ³", songs: ["ABSOLUTE RUN!!!", "Be proud"], idols: [13, 14, 15]},
];


// På°„å‡ºã®è»Œè·¡æç”»ç”¨ã‚·ãƒ¼ãƒ³
class TrajectoryScene extends Phaser.Scene {
    static tpoints = []

    constructor() { super({ key: 'Trajectory' }) }

    preload() { 
        this.load.image('tpoint', 'assets/TrajectoryPoint.png')
    }

    create() {
        this.dummy = this.physics.add.body(400, 500, 48, 48)
        this.dummy.setCollideWorldBounds(true);
        this.dummy.setBounce(1);
        this.tpoints = []
        for (let i = 0; i < 5; i++) {
            this.tpoints.push(this.add.image(0, 0, 'tpoint'))
        }
    }

    updateTrajectory(pc, point) {
        this.dummy.x = pc.x
        this.dummy.y = pc.y
        this.dummy.setVelocity(startPoint.x - point.x, (startPoint.y - point.y) * 9)
        this.dummy.setGravityY(400);
        this.tpoints.forEach((tp, i) => {
            this.physics.world.step(0.2)
            tp.setPosition(this.dummy.x, this.dummy.y)
        })
        this.dummy.setGravityY(0)
        this.dummy.setVelocity(0, 0)
    }
}


let scene;
let timeline;
let input;

let hitSound;
let bgm;

let nextIdol;
let scoutIdols = [];
let scoutUnits = [];

let pc;

let unit;
let unitTween;
let unitProfile;
let unitProfileTween;
let unitCount;
let unitCountTween;
let unitIcons;

let emitter;
let icons;
let iconTween;
let hitCircles;
let hitTween;
let idolImage;
let idolTween;
let name;
let nameTween;
let profile;
let profileTween;
let scoutCount;
let scoutCountTween;


// Pã®åˆæœŸä½ç½®
const startPoint = new Phaser.Math.Vector2(400, 500);
// ã‚¢ã‚¤ã‚³ãƒ³ã®ã‚¹ã‚±ãƒ¼ãƒ«
const iconScale = 0.25


// På°„å‡ºè»Œè·¡ç”¨ã‚·ãƒ¼ãƒ³ã‚’èµ·å‹•
let trajectoryScene = game.scene.add('Trajectory', TrajectoryScene)
game.scene.start('Trajectory')


function preload() {
    this.load.image('star', 'assets/star.png');
    this.load.image('P', 'assets/p.png');
    this.load.spritesheet('icon', 'assets/icon.png', { frameWidth: 152, frameHeight: 152 });
    this.load.spritesheet('idol', 'assets/idol.png', { frameWidth: 280, frameHeight: 500 });
    this.load.audio('hit', 'assets/hit.mp3')
    this.load.audio('bgm', 'assets/bgm.mp3')
}

function create() {
    nextIdol = 0;
    scoutIdols = [];
    scoutUnits = [];

    scene = this;
    timeline = this.add.timeline()
    timeline.play()
    createBG();

    // BGM
    let bgm = this.sound.get('bgm')
    if (bgm == null)
        bgm = this.sound.add('bgm', { loop: true, volume: 0.4 })
    if (!this.sound.locked) {
        bgm.play()
    } else {
        this.sound.once(Phaser.Sound.Events.UNLOCKED, () => {
            bgm.play()
        })
    }
    
    // ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼
    pc = this.physics.add.sprite(startPoint.x, startPoint.y, 'P');
    pc.setCollideWorldBounds(true);
    pc.body.checkCollision.up = false;
    pc.body.checkCollision.left = false;
    pc.body.checkCollision.right = false;
    pc.setInteractive({ draggable: true});
    pc.on('dragstart', (p) => {
        this.scene.wake('Trajectory')
    })
    pc.on('drag', (pointer, x, y) => {
        pc.setPosition(x, y);
        this.scene.get('Trajectory').updateTrajectory(pc, pointer)
    });
    pc.on('dragend', (p) => {
        this.input.setDraggable(pc, false)
        pc.setInteractive({ draggable: false})
        pc.setBounce(1.0);
        pc.setGravityY(400);
        pc.setVelocityX(startPoint.x - p.x);
        pc.setVelocityY((startPoint.y - p.y) * 9);
        this.scene.sleep('Trajectory')
    });

    // å…¥åŠ›
    this.input.setDraggable(pc);
    this.input.mouse.disableContextMenu();

    // ã‚¢ã‚¤ãƒ‰ãƒ«
    icons = this.physics.add.group({ 
        key: 'icon',
        frame: Phaser.Utils.Array.NumberArray(13, 51),
        setScale: { x: iconScale, y: iconScale },
    })
    icons.getChildren().forEach((s, i) => {
        s.setData('id', i + 13)
        s.setCollideWorldBounds(true)
        s.setBounce(0.8)
        Phaser.Math.RandomXY(s.body.velocity, 30)
        s.setVelocityY(0)
    });
    Phaser.Actions.RandomRectangle(icons.getChildren(), 
                            new Phaser.Geom.Rectangle(16, 160, 768, 100))

    // æ¥è§¦
    this.physics.add.collider(pc, icons, collectStar, null, this)

    // ã‚¢ã‚¤ãƒ‰ãƒ«ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
    idolImage = this.add.image(-650, 500, 'idol')
    idolImage.postFX.addGlow(0x202020, 1)
    idolImage.visible = false
    idolTween = createTweenChain(idolImage, tweens4)
    profile = createIdolProfileText(``)
    profileTween = createTweenChain(profile.preFX.addReveal(0.1, 1, 1), tweens6)
    name = createIdolNameText('#ea5b76', '')
    nameTween = createTweenChain(name, tweens5)
    scoutCount = createScoutCountText()
    scoutCountTween = createTweenChain(scoutCount, tweenScoutCount)

    // ãƒ¦ãƒ‹ãƒƒãƒˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
    unit = createUnitText('')
    unit.setPosition(400, 300)
    unitTween = createTweenChain(unit, tweens2)
    unitProfile = createUnitProfileText(``)
    unitProfileTween = createTweenChain(unitProfile.preFX.addReveal(0.1, 0, 1), tweens7)
    unitIcons = this.add.group({
        key: 'icon',
        repeat: 4,
        setScale: { x: 0.24, y: 0.24 },
        setXY: { x: 20, y: 410, stepX: 38 },
        visible: false,
    })
    // unitCount = createUnitCountText()
    // unitCountTween = createTweenChain(unitCount, tweenScoutCount)
}

function update() {
    // çµ‚äº†å‡¦ç†
    if (checkGameOver()) {
        pc.setVelocityX(0)
        pc.setBounce(0.1)
        scene.sound.stopAll()
        createRetryText()
    }
}

// çµ‚äº†åˆ¤å®š
function checkGameOver() {
    return pc.body.bounce.y >= 0.5 && pc.y >= startPoint.y && pc.body.velocity.y > 0
}



/////////////////////////////////////
// ã‚¢ã‚¤ãƒ‰ãƒ«ã¨æ¥è§¦
function collectStar(pc, icon) {
    let id = icon.getData('id')
    scoutIdols.push(id)

    // Pã‚’è·³ã­ã•ã›ã‚‹
    pc.setVelocityY(Math.max(pc.body.velocity.y - 300, -500))
    scene.sound.play('hit', markers[nextIdol])
    
    // ã‚¹ã‚«ã‚¦ãƒˆæ¼”å‡º
    let c = scene.add.circle(icon.x, icon.y, 8)
    c.setStrokeStyle(1, 0xffff80)
    createTweenChain(c, tweenHitCircle)
        .resume()
        .on('complete', () => { c.destroy() })

    // å¾Œã«åŠ å…¥è¡¨ç¤º
    let pos = scoutIconPos(nextIdol)
    icon.disableBody(true, false)
    timeline.add({
        in: 800,
        once: true,
        run: () => {
            icon.setX(pos.x)
            icon.setY(pos.y)
            createTweenChain(icon, tweens3).resume()
            let e = createEmitter(icon)
            e.on('complete', () => {
                e.destroy()
            })
        }
    })

    // ã‚¢ã‚¤ãƒ‰ãƒ«ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
    name.setText(idols[id].name)
    name.setStroke(idols[id].color)
    profile.setText(idolProfile(id))
    idolImage.setFrame(id)
    scoutCount.setText((nextIdol+1).toString() + 'äºº')
    let ts = [idolTween, profileTween, nameTween, scoutCountTween]
    ts.forEach(t => t.restart())

    // ãƒ¦ãƒ‹ãƒƒãƒˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
    let ary = checkCompleteUnits(id)
    Phaser.Math.RND.shuffle(ary).forEach(u => {
        scoutUnits.push(u); 
        unit.setText(u.name)
        unitProfile.setText(unitProfileText(u))

        unitIcons.getChildren().forEach(icon => { icon.setVisible(false) })
        if (u.idols.length <= 5) {
            u.idols.forEach((idol, i) => {
                let pos = [1, 2, 3, 0, 4]
                unitIcons.getChildren().at(pos[i]).setFrame(idol).setVisible(true)
            })
        }
    })
    if (ary.length > 0) {
        // unitCount.setText(scoutUnits.length + 'ï¾•ï¾†ï½¯ï¾„')
        ts = [unitTween, unitProfileTween]
        ts.forEach(ts => ts.restart())
    }
ary.forEach(v => {console.log(v.name);});
    

    nextIdol++
}

// ã‚¹ã‚«ã‚¦ãƒˆã‚¢ã‚¤ã‚³ãƒ³ã®ä½ç½®
function scoutIconPos(idx) {
    return new Phaser.Math.Vector2((idx % 8) * 46 + 210, Math.trunc(idx / 8) * 46 + 400)
}

// ã‚¢ã‚¤ãƒ‰ãƒ«ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«æ–‡å­—åˆ—
function idolProfile(id) {
    let idol = idols[id]
    return [
        'å¹´ã€€é½¢ï¼š' + idol.age + "æ­³", 
        'èº«ã€€é•·ï¼š' + idol.stature + "ã",
        'å‡ºèº«åœ°ï¼š' + idol.hometown,
        'è¶£ã€€å‘³ï¼š' + idol.hobby,
    ]
}

// ãƒ¦ãƒ‹ãƒƒãƒˆãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«æ–‡å­—åˆ—
function unitProfileText(unit) {
    return unit.songs.map((s, i) => {
        if (i == 0)
            return 'ğŸµ' + s
        else
            return '\nğŸµ' + s
    })
}

// ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ã‚¨ãƒŸãƒƒã‚¿ãƒ¼ã®ä½œæˆ
function createEmitter(obj) {
    return scene.add.particles(0, 0, 'star', {
        speed: 24,
        lifespan: 1000,
        quantity: 10,
        scale: { start: 0.4, end: 0 },
        // emitting: false,
        emitZone: { type: 'edge', source: obj.getBounds(), quantity: 40 },
        duration: 15,
    })
}

// å®Œæˆã—ãŸãƒ¦ãƒ‹ãƒƒãƒˆãŒã‚ã‚‹ã‹
function checkCompleteUnits(idolId) {
    return units.filter(u => {
        if (u.idols.includes(idolId)) {
            return u.idols.reduce((a, v) => {
                return a & scoutIdols.includes(v)
            }, true)
        }
        return false
    })
}



/////////////////////////////////////
// Tween
const tweens1 = [
]
// unitname
const tweens2 = [
    { x: -200, y: 350, scale: 1, alpha: 1, duration: 0 },
    { x: 6, duration: 500, ease: 'power3' },
]
// icon
// ease:sine.inã§å®šé€Ÿå›è»¢ã€‚
const tweens3 = [
    { scaleX: iconScale, flipX: false, duration: 0, },
    { scaleX: 0, flipX: true, yoyo: true, duration: 100, repeat: 0, ease: 'sine.in' },
    { scaleX: 0, flipX: true, yoyo: true, duration: 100, repeat: 0, ease: 'sine.in' },
]
// idolImage
const tweens4 = [
    { x: 650, y: 450, visible: true, duration: 0, alpha: { value: 0, duration: 0 } },
    { y: 480, duration: 400, alpha: { value: 1, duration: 200} },
]
// name
const tweens5 = [
    { x: -500, duration: 0 },
    { x: 500, y: 470, delay: 200, duration: 0, alpha: { value: 0, duration: 0 }, onComplete: () => name.setVisible(true)},
    { x: 560, y: 450, duration: 300, alpha: { value: 1, duration: 200 }},
]
// profile
const tweens6 = [
    { progress: 0, duration: 0, onComplete: () => profile.setVisible(true) },
    { progress: 1, duration: 200, },
]
// unit profile
const tweens7 = [
    { progress: 0, duration: 0, onComplete: () => unitProfile.setVisible(true) },
    { progress: 1, duration: 500, },
]
const tweenHitCircle = [
    { radius: 8, duration: 0, },
    { radius: 60, duration: 500, ease: 'power4' , strokeAlpha: { value: 1, duration: 500}, }
]
const tweenScoutCount = [
    { x: 520, y: 340, duration: 0 },
    { scale: 1.4, duration: 150, yoyo: true, ease: 'Sine.easeInOut', },
]


// ãƒˆã‚¥ã‚¤ãƒ¼ãƒ³ãƒã‚§ã‚¤ãƒ³ã®ä½œæˆ
function createTweenChain(target, tweens) {
    return scene.tweens.chain({
        targets: target,
        tweens: tweens,
        paused: true,
        onActive: () => target.visible = true,
        // onComplete: () => target.visible = false,
    })
}


/////////////////////////////////////
// ãƒ†ã‚­ã‚¹ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

function setTextGradient(t) {
    let g = t.context.createLinearGradient(0, 0, 0, t.height);
    g.addColorStop(0, '#111111')
    g.addColorStop(0.4, '#ffffff')
    g.addColorStop(0.4, '#aaaaaa')
    g.addColorStop(1, '#1111')
    t.setFill(g)
}

function createUnitText(txt) {
    let t = scene.add.text(0, 0, txt, {
        fontSize: 20,
        fontStyle: 'bold',
        padding: { x: 8, y: 8 },
        color: '#ffffff',
        stroke: '#8090e0',
        strokeThickness: 8,
        shadow: {
            color: '#808080',
            fill: false,
            stroke: true,
            offsetX: 2,
            offsetY: 2,
            blur: 4
        }
    });

    // t.setOrigin(0.5);
    // t.preFX.setPadding(32);
    // t.preFX.addGlow(0xffffe0);
    // t.postFX.addShine(1, .2, 5)
    // t.preFX.addPixelate(1);
    // setTextGradient(t);
    return t;
}

function createUnitProfileText(txt) {
    let t = scene.add.text(6, 420, txt, {
        color: '#202020',
        stroke: '#202020',
        strokeThickness: 1,
        backgroundColor: '#f0f0f0a0',
        lineSpacing: 1,
        padding: { x: 4, y: 16},
    })
    
    t.setVisible(false)
    return t
}

function createIdolNameText(color, txt) {
    let t = scene.add.text(-500, 400, txt, {
        fontSize: 32,
        fontStyle: 'bold',
        color: '#ffffff',
        padding: { x: 8, y: 8 },
    })

    t.setVisible(false)
    t.setStroke(color, 8)
    t.setRotation(-0.07 * Math.PI)
    return t
}

function createIdolProfileText(txt) {
    let t = scene.add.text(560, 480, txt, {
        color: '#202020',
        stroke: '#202020',
        strokeThickness: 1,
        backgroundColor: '#f0f0f080',
        lineSpacing: 2,
        padding: 8,
    })

    return t
}

function createScoutCountText() {
    let t = scene.add.text(-560, 340, '0äºº', {
        fontSize: 48,
        fontStyle: 'bold',
        color: '#ffffff',
        stroke: '#f07090',
        strokeThickness: 12,
    })

    t.setOrigin(0.5)
    t.setVisible(false)
    return t
}

function createUnitCountText() {
    let t = scene.add.text(15, 370, '0ï¾•ï¾†ï½¯ï¾„', {
        fontSize:32,
        fontStyle: 'bold',
        color: '#f0f0ff',
        stroke: '#b0b0e0',
        strokeThickness: 8,
    })

    return t
}

function createRetryText() {
    let t = scene.add.text(400, 150, "Retry", {
        fontSize: 48,
        fontStyle: 'bold',
        color: '#ffc060',
        stroke: '#ffffff',
        strokeThickness: 16,
    })
    
    t.setOrigin(0.5)
    t.setInteractive()
    t.on('pointerup', () => scene.scene.restart())
    return t;
}

function createDebugTextObj() {
    return scene.add.text(10, 10, '', {
        color: '#00c000',
        shadow: { color: '#202020', fill: true, blur: 8 }
    })
}


///////////////////////////////
// image
function createBG() {
    const bg = scene.add.image(400, 300, '__WHITE')
    bg.setDisplaySize(800, 600)
    bg.preFX.addGradient(0x6060f0, 0xc0f0c0, 0.2)
    return bg;
}



</script>
</body>
</html>